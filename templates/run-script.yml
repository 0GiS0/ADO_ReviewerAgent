parameters:
  - name: script
    type: string
  - name: args
    type: string
    default: ''
  - name: displayName
    type: string
  - name: workingDirectory
    type: string
    default: $(System.DefaultWorkingDirectory)
  - name: env
    type: object
    default: {}

steps:
  - bash: |
      set -e
      SCRIPT_PATH="$(System.DefaultWorkingDirectory)/scripts/${{ parameters.script }}"
      
      if [ -z "${{ parameters.args }}" ]; then
        "$SCRIPT_PATH"
      else
        # Usar eval para manejar correctamente las comillas en los argumentos
        eval "$SCRIPT_PATH" ${{ parameters.args }}
      fi
    displayName: ${{ parameters.displayName }}
    workingDirectory: ${{ parameters.workingDirectory }}
    env: ${{ parameters.env }}
